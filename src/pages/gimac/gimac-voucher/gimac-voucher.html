<ion-header>
  <ion-navbar>
    
    <ion-title>Retrait Sans Carte</ion-title>
    <div class="frontImage"> 
     
    </div>
    <ion-buttons end>
      <button ion-button icon-only (click)="openVoucherHistory()">
        <ion-icon name="time"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <form   [formGroup]="formgroup">
    <div class="form-content">
    

       
      <ion-list>
  
        <div  text-center >
          <h6>Montant </h6>
        </div>
  

        <ion-item class="form-item">
          <ion-input class="text-input" formControlName="montant" type="number"  autocorrect="off" autocapitalize="none" name="montant" placeholder="Montant du Voucher"></ion-input>
        </ion-item>
    

      </ion-list>
    </div>
    <ion-item class="form-item toggle" no-lines >
      <ion-label class="advanced">Options avancées</ion-label>
      <ion-toggle [(ngModel)]="advanced" checked="false" [ngModelOptions]="{standalone: true}" color="success" ></ion-toggle>
    </ion-item>
  
  <ion-segment [(ngModel)]="selectedSegment" (ionChange)="onSegmentChanged($event)"  [ngModelOptions]="{standalone: true}" *ngIf="advanced" >
    <ion-segment-button value="showWallet">
      wallet Mobile
    </ion-segment-button>
    <ion-segment-button value="showBank">
      Banques
    </ion-segment-button>

  </ion-segment>
  <div *ngIf="advanced">
    
      <div class="form-content">
      <div  text-center *ngIf="showWallet">
        <h6>Vers compte mobile </h6>
      </div>
      <div  text-center  *ngIf="showBank">
        <h6>Vers compte bancaire </h6>
      </div>
      <ion-list>
        
        <ion-item class="form-item" *ngIf="showWallet">
          <ion-select [(ngModel)]="paysWallet"  multiple="false" [ngModelOptions]="{standalone: true}" [selectOptions]="selectOptions" placeholder="Pays" (ionChange)="onChangeWallet($event)"> 
            <ion-option *ngFor="let paysWallet of paysWallets" [selected]="true" value={{paysWallet.pays_id}}>{{paysWallet.libelle_label}}</ion-option> 
          </ion-select>
        </ion-item>
        <ion-item class="form-item"  *ngIf="showBank">
          <ion-select [(ngModel)]="paysBank"  multiple="false" [ngModelOptions]="{standalone: true}" [selectOptions]="selectOptions" placeholder="Pays" (ionChange)="onChangeBank($event)" > 
            <ion-option *ngFor="let paysBank of paysBanks" [selected]="true" value={{paysBank.pays_id}} >{{paysBank.libelle_label}}</ion-option> 
          </ion-select>
        </ion-item>
        <ion-item class="form-item" >
          <ion-select [(ngModel)]="wallet"  multiple="false" [ngModelOptions]="{standalone: true}" [selectOptions]="selectOptions2" [placeholder]='showBank? "Banque" : "Opérateur"' > 
            <ion-option *ngFor="let wallet of wallets"  value={{wallet.code_walet}}>{{wallet.libelle_walet}} ({{wallet.banque || wallet.mno}})</ion-option> 
          </ion-select>
        </ion-item>
        <ion-item class="form-item">
          <ion-input class="text-input" formControlName="account" type="text" autocorrect="off" autocapitalize="none" name="account" placeholder="Numéro du destinataire"></ion-input>
        </ion-item>
          <ion-item class="validity "  no-lines>
            <ion-label class="label-validity">Validité en Heures</ion-label>

            <ion-range min="0"  max="72" step="2"  color="success"  formControlName="validity" pin="true" no-lines>

              <ion-label range-left>Infinie</ion-label>
              <ion-label range-right>72H</ion-label>
            </ion-range>
          </ion-item>
  

   
      </ion-list>

    
  </div>
 
  
      
  <div  text-center  *ngIf="advanced">
    <button ion-button  block class="login-button" [disabled]="!formgroup.valid || !wallet ||  !(paysBank || paysWallet) " (tap)="launchcheck()">Générer</button>

  </div>
</div >
  <div  text-center class="message-error-text">
          
         
    <p >{{ message }} </p>
 
</div>

<div  text-center *ngIf="!advanced" >
  <button ion-button  block class="login-button" [disabled]="!montant.valid" (tap)="launchcheck()">Générer</button>

</div>

  
 
</form>

</ion-content>  
